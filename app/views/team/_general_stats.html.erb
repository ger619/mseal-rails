<% @statistic.each do |stat| %>
  <!-- General Stats -->
  <div class="col-span-1 text-center p-2">
    <p class="font-bold text-[#FAE115] md:text-6xl sm:text-2xl"><%= stat.matches_played %></p>
    <span class="font-extralight">Matches played</span>
  </div>
  <div class="col-span-1 text-center p-2">
    <p class="font-bold text-[#FAE115] md:text-6xl sm:text-2xl"><%= stat.minutes_played %></p>
    <span class="font-extralight">Minutes played</span>
  </div>
  <div class="col-span-1 text-center p-2">
    <p class="font-bold text-[#FAE115] md:text-6xl sm:text-2xl"><%= stat.goals_scored %></p>
    <span class="font-extralight">Goal Scored</span>
  </div>
  <!-- Tab One -->

  <div class="col-span-1 p-2">
    <span class="font-extralight mb-10 text-center" id="chartLabel" style="display: block;">Tackles Percentage</span>
    <div class="justify-items-center md:h-32 h-24  relative">
      <canvas id="tacklesChart"></canvas>
      <span class="absolute inset-0 flex items-center justify-center text-[#fae115] md:text-xl font-bold"><%= stat.tackles_percentage %>%</span>
    </div>
  </div>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Get the context of the canvas element we want to select
          var ctx = document.getElementById('tacklesChart').getContext('2d');
          // Get the tackles percentage from the server-side variable
          var tacklesPercentage = <%= stat.tackles_percentage %>;
          var playerName = "<%= @team.first_name %> <%= @team.last_name %>"; // Get the player's name
          var label = document.getElementById('chartLabel').innerText; // Get the label text

          // Create a new Chart instance
          new Chart(ctx, {
              type: 'doughnut', // Specify the chart type
              data: {
                  datasets: [{
                      // Data for the chart
                      data: [tacklesPercentage, 100 - tacklesPercentage],
                      // Colors for the chart segments
                      backgroundColor: ['#FFD700', '#e6e6e6'],
                  }],
              },
              options: {
                  cutout: '85%', // Cutout percentage for the doughnut chart
                  responsive: true,
                  maintainAspectRatio: true, // Allows control over canvas size
                  plugins: {
                      tooltip: { enabled: false }, // Disable tooltips
                      legend: { display: false }, // Hide the legend
                      beforeDraw: function(chart) {
                          // Custom function to draw text in the center of the chart
                          var width = chart.width,
                              height = chart.height,
                              ctx = chart.ctx;
                          ctx.restore();
                          var fontSize = (height / 4).toFixed(2); // Calculate font size
                          ctx.font = fontSize + "em sans-serif"; // Set font style
                          ctx.textBaseline = "middle"; // Set text baseline
                          ctx.fillStyle = "white"; // Set text color to white

                          // Draw the percentage text
                          var text = tacklesPercentage + "%",
                              textX = Math.round((width - ctx.measureText(text).width) / 2),
                              textY = height / 2 - 10;
                          ctx.fillText(text, textX, textY);

                          // Draw the label text
                          ctx.font = (fontSize / 2) + "em sans-serif"; // Set smaller font size for the label
                          var labelX = Math.round((width - ctx.measureText(label).width) / 2),
                              labelY = height / 2 + 10;
                          ctx.fillText(label, labelX, labelY);

                          ctx.save();
                      }
                  }
              }
          });
      });
  </script>
<% end %>